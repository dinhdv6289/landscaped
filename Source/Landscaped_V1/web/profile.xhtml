<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.prime.com.tr/ui">
    <ui:composition template="./template/userTemplate.xhtml">
        <ui:define name="content">
            <div class="wrap-content">
                <div class="content-bg-title">
                    <div class="content-title">Thông tin cá nhân</div>
                </div>
                <div class="content-data">
                    <p:tabView dynamic="true" cache="true">
                        <p:tab title="Thông tin cá nhân">

                            <p:panel header="Thay đổi mật khẩu" toggleable="true">
                                <h:form id="changePasswordForm" prependId="false">
                                    <ul id="frmRegister">
                                        <li>
                                            <label  style="width: 150px;">Old Password </label>
                                            <h:inputSecret styleClass="textbox" id="oldPassword" value="#{accountBean.current.password}"></h:inputSecret>
                                        </li>
                                        <li>
                                            <label  style="width: 150px;">New Password </label>
                                            <h:inputSecret styleClass="textbox" id="newPassword" value="#{accountBean.current.password}"></h:inputSecret>
                                        </li>
                                        <li>
                                            <label  style="width: 150px;">New Confirm Password </label>
                                            <h:inputSecret styleClass="textbox" id="newConfirmPassword" value="#{accountBean.current.password}"></h:inputSecret>
                                        </li>
                                        <li>
                                            <label  style="width: 150px;">&nbsp;</label>
                                            <p:commandButton ajax="false" action="#{accountBean.updateInfo}" value="Thay đổi"></p:commandButton>
                                        </li>
                                    </ul>
                                </h:form>
                            </p:panel>
                            <p:panel header="Thay đổi Thông tin cá nhân" toggleable="true">
                                <h:form id="changeInfoFrom" prependId="false">
                                    <ul id="frmRegister">
                                        <li>
                                            <label>Họ và Tên</label>
                                            <h:inputText styleClass="textbox" id="fullName" value="#{accountBean.current.fullName}"></h:inputText>
                                        </li>
                                        <li>
                                            <label>Tên Công ty</label>
                                            <h:inputText styleClass="textbox" id="compartment" value="#{accountBean.current.compartment}"></h:inputText>
                                        </li>
                                        <li>
                                            <label>Điện thoại </label>
                                            <h:inputText styleClass="textbox" id="homePhone" value="#{accountBean.current.homePhone}"></h:inputText>
                                        </li>
                                        <li>
                                            <label>Điện thoại di động </label>
                                            <h:inputText styleClass="textbox" id="mobilePhone" value="#{accountBean.current.mobilePhone}"></h:inputText>
                                        </li>
                                        <li>
                                            <label>Email</label>
                                            <h:inputText styleClass="textbox" id="email" value="#{accountBean.current.email}"></h:inputText>
                                        </li>
                                        <li>
                                            <label>Địa chỉ</label>
                                            <h:inputText styleClass="textbox" id="address" value="#{accountBean.current.address}"></h:inputText>
                                        </li>
                                        <li style="height: 160px;">
                                            <label>&nbsp;</label>
                                            <div style="float: left;">
                                                <h:graphicImage width="150px" height="150px" url="#{accountBean.current.picture}" id="picture"></h:graphicImage>
                                            </div>
                                        </li>
                                        <li style="height: 110px;">
                                            <label>Ảnh đại diện</label>
                                            <p:fileUpload  style="width: 500px;float: right" fileUploadListener="#{accountBean.fileUploadListener}"
                                                           allowTypes="*.jpg;*.png;*.gif;" description="*.jpg;*.png;*.gif"/>
                                        </li>
                                        <li>
                                            <label style="width: 150px;">&nbsp;</label>
                                            <p:commandButton ajax="false" action="#{accountBean.updateInfo}" value="Cập nhập"></p:commandButton>
                                        </li>
                                    </ul>
                                </h:form>
                            </p:panel>
                        </p:tab>
                        <p:tab title="Thông tin đặt hàng">
                        </p:tab>
                    </p:tabView>
                </div>
            </div>
            <script type="text/javascript">
jQuery(document).ready(function() {
    jQuery("#changePasswordForm").validate({
           rules: {
               oldPassword: {
                       required: true,
                       minlength: 6,
                       maxlength: 30
               },
               newPassword: {
                       required: true,
                       minlength: 6,
                       maxlength: 30
               },
               newConfirmPassword: {
                       required: true,
                       minlength: 6,
                       maxlength: 30,
                       equalTo : jQuery("#newPassword")
               }
           },
           errorClass : "validate_error",
               errorElement: "span",
               errorPlacement: function(error, element) {
               error.appendTo(element.parent("li"));
          },
           success : function(errorElement){
               errorElement.addClass("validate_success");
            }
        });
       jQuery("#changeInfoFrom").validate({
           rules: {
               fullName: {
                       required: true,
                       minlength: 6,
                       maxlength: 30
               },
               compartment: {
                       required: true,
                       minlength: 6,
                       maxlength: 100
               },
               homePhone: {
                       required: true,
                       minlength: 7,
                       maxlength: 10,
                       number: true
               },
               mobilePhone: {
                       required: true,
                       minlength : 9,
                       maxlength : 14,
                       number: true
               },
               email: {
                       required: true,
                       minlength: 10,
                       maxlength: 100,
                       email: true
               },
               address: {
                       required: true,
                       maxlength: 250
               }
           },
           errorClass : "validate_error",
               errorElement: "span",
               errorPlacement: function(error, element) {
               error.appendTo(element.parent("li"));
          },
           success : function(errorElement){
               errorElement.addClass("validate_success");
            }
        });
  });
            </script>
        </ui:define>
    </ui:composition>
</html>
